# ============================================================================
# PRODUCTION ENVIRONMENT
# ============================================================================
# CRITICAL: This file contains production secrets. 
# DO NOT commit this file to version control.
# Use Azure Key Vault, AWS Secrets Manager, or Kubernetes Secrets in production.

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
NODE_ENV=production
PORT=3000
NEXTAUTH_URL=https://yourdomain.com

# ============================================================================
# DATABASE CONFIGURATION (Azure PostgreSQL - Highly Recommended)
# ============================================================================
# IMPORTANT: Use SSL mode for production
DATABASE_URL=postgres://username@servername:password@servername.postgres.database.azure.com:5432/dbname_production?sslmode=require
GENERAL_DB_HOST=servername.postgres.database.azure.com
GENERAL_DB_USER=username@servername
GENERAL_DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
GENERAL_DB_NAME=dbname_production
GENERAL_DB_PORT=5432

# Additional DB connections (if using)
BLOG_DB_HOST=servername.postgres.database.azure.com
BLOG_DB_USER=username@servername
BLOG_DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
BLOG_DB_NAME=blog_production
BLOG_DB_PORT=5432

SOLUTIONS_DB_HOST=servername.postgres.database.azure.com
SOLUTIONS_DB_USER=username@servername
SOLUTIONS_DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
SOLUTIONS_DB_NAME=solutions_production
SOLUTIONS_DB_PORT=5432

EXPERIMENT_DB_HOST=servername.postgres.database.azure.com
EXPERIMENT_DB_USER=username@servername
EXPERIMENT_DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
EXPERIMENT_DB_NAME=experiments_production
EXPERIMENT_DB_PORT=5432

LEARNINGPLAN_DB_HOST=servername.postgres.database.azure.com
LEARNINGPLAN_DB_USER=username@servername
LEARNINGPLAN_DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
LEARNINGPLAN_DB_NAME=learning_plans_production
LEARNINGPLAN_DB_PORT=5432

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# CRITICAL: Generate strong, unique secrets for production
# Generate with: openssl rand -hex 32
APP_SECRET=REPLACE_WITH_STRONG_GENERATED_SECRET
NEXTAUTH_SECRET=REPLACE_WITH_STRONG_GENERATED_SECRET

# ============================================================================
# QDRANT VECTOR DATABASE
# ============================================================================
# For Docker Compose deployment:
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=REPLACE_WITH_STRONG_GENERATED_KEY

# For Kubernetes deployment:
# QDRANT_HOST=qdrant-service.sdg-innovation-commons.svc.cluster.local
# QDRANT_PORT=6333

# CRITICAL: Ensure persistent volumes are configured
# See DEPLOYMENT.md for data persistence strategy

# ============================================================================
# REDIS CACHE
# ============================================================================
# For Docker Compose:
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_STRONG_PASSWORD

# For Kubernetes:
# REDIS_HOST=redis-service.sdg-innovation-commons.svc.cluster.local

# For Azure Redis Cache:
# REDIS_HOST=your-redis.redis.cache.windows.net
# REDIS_PORT=6380
# REDIS_PASSWORD=your-redis-key
# REDIS_TLS=true

# ============================================================================
# SEMANTIC SEARCH SERVICE
# ============================================================================
# For Docker Compose:
SEMANTIC_SEARCH_URL=http://semantic-search:8000
SEMANTIC_SEARCH_API_KEY=REPLACE_WITH_STRONG_GENERATED_KEY

# For Kubernetes:
# SEMANTIC_SEARCH_URL=http://semantic-search-service.sdg-innovation-commons.svc.cluster.local:8000

# Allowed origins (update with your actual domains)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Embedding configuration
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
DEVICE=cpu
QDRANT_COLLECTION_NAME=sdg_documents

# ============================================================================
# EXTERNAL APIs
# ============================================================================
OPENCAGE_API=REPLACE_WITH_PRODUCTION_KEY
ACCLAB_PLATFORM_KEY=REPLACE_WITH_PRODUCTION_KEY
BLOG_API_TOKEN=REPLACE_WITH_PRODUCTION_TOKEN

# ============================================================================
# EMAIL/SMTP CONFIGURATION
# ============================================================================
SMTP_HOST=smtp.office365.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASS=REPLACE_WITH_SMTP_PASSWORD

# ============================================================================
# AZURE STORAGE
# ============================================================================
# For production file storage, backups, and uploads
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=productionstorage;AccountKey=REPLACE_WITH_KEY;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER=production-uploads

# Optional: Separate container for backups
# AZURE_BACKUP_CONTAINER=production-backups

# ============================================================================
# WORKER CONFIGURATION
# ============================================================================
WORKER_CONCURRENCY=4
WORKER_INTERVAL=60

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=WARN

# Application Insights (Azure)
APPINSIGHTS_INSTRUMENTATIONKEY=REPLACE_WITH_YOUR_KEY
APPINSIGHTS_CONNECTION_STRING=InstrumentationKey=...;IngestionEndpoint=...

# Error tracking (Sentry)
SENTRY_DSN=REPLACE_WITH_YOUR_SENTRY_DSN
SENTRY_ENVIRONMENT=production

# ============================================================================
# PERFORMANCE & OPTIMIZATION
# ============================================================================
# Next.js optimization
NEXT_TELEMETRY_DISABLED=1

# Connection pooling
DB_POOL_MIN=2
DB_POOL_MAX=10

# ============================================================================
# SECURITY HEADERS & CSP
# ============================================================================
# Content Security Policy
CSP_ENABLED=true

# CORS Configuration
CORS_ORIGIN=https://yourdomain.com

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ============================================================================
# DEPLOYMENT INFO (Auto-populated by CI/CD)
# ============================================================================
# DEPLOYMENT_ID=
# DEPLOYMENT_DATE=
# GIT_COMMIT=
# GIT_BRANCH=
